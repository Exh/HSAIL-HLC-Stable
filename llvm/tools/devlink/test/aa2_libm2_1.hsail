version 1:0:small;

function &__amd_amp_Fsin_f32 (arg_f32 %ret_val) (arg_f32 %arg_val0) ;
function &__amd_amp_Fsqrt_f32 (arg_f32 %ret_val) (arg_f32 %arg_val0) ;


kernel &__OpenCL_test_libm2_kernel(kernarg_u32 %res, kernarg_f32 %x, kernarg_f32 %y)
{
	spill_f32	%stack[1] ;
@__OpenCL_test_libm2_kernel_entry:

	ld_kernarg_f32	$s0, [%x] ;
	{
		arg_f32		%a ;
		st_arg_f32	$s0, [%a] ;		
		arg_f32		%rv ;
		call		&__amd_amp_Fsin_f32 (%rv)(%a) ; 
		ld_arg_f32	$s0, [%rv] ;
	}
	st_spill_f32	$s0, [%stack][0] ;	

	ld_kernarg_f32	$s0, [%y] ;
	{
		arg_f32		%b ;
		st_arg_f32	$s0, [%b] ;		
		arg_f32		%rv2 ;
		call		&__amd_amp_Fsqrt_f32 (%rv2)(%b) ; 
		ld_arg_f32	$s0, [%rv2] ;
	}
	ld_spill_f32	$s1, [%stack][0] ; 	

	mul_f32		$s2, $s1, $s0 ;		

	workitemaid	$s1, 0 ;		
	shl_u32	        $s0, $s1, 2 ;		
	ld_kernarg_u32	$s1, [%res] ; 		
	add_u32	        $s1, $s0, $s1 ;		

	st_global_f32	$s2, [$s1] ;		
	ret ;
};
